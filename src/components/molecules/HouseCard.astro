---
import { Image } from 'astro:assets';
import { renderMarkdown } from '@utils/renderMarkdown';
import type { ImageMetadata } from 'astro';
import HouseShape from './HouseShape.astro';


export interface Props {
  image?: ImageMetadata;
  imageAlt?: string;
  title: string;
  description?: string;
  href?: string;
  variant?: 'primary' | 'secondary' | 'supporting1' | 'supporting2' | 'speed' | 'neutral';
  houseVariant?: 'standard' | 'tall' | 'wide';
  class?: string;
}

const {
  image,
  imageAlt = '',
  title,
  description,
  href,
  variant = 'primary',
  houseVariant = 'standard',
  class: className = ''
} = Astro.props;

const variantColors = {
  primary: 'bg-primary-50 hover:bg-primary-100',
  secondary: 'bg-secondary-50 hover:bg-secondary-100',
  supporting1: 'bg-supporting1-50 hover:bg-supporting1-100',
  supporting2: 'bg-supporting2-50 hover:bg-supporting2-100',
  speed: 'bg-speed-50 hover:bg-speed-100',
  neutral: 'bg-neutral-50 hover:bg-neutral-100',
};

const Tag = href ? 'a' : 'div';
---

<Tag
	href={href}
	class={`block transition-all border-neutral-200 text-neutral-600 border-b-4 no-underline duration-200 ${className}`}
>
	<div class="flex flex-col *:bg-white">
		<HouseShape
			variant={houseVariant}
			backgroundColor={variantColors[variant]}
			class="overflow-hidden"
		>
			{
				image && (
					<Image src={image} alt={imageAlt} class="w-full object-cover" />
				)
			}
		</HouseShape>
		<div class="h-full p-6">
			<div class="space-y-2 bg-white">
				<h3 class="text-xl font-bold text-neutral-900 md:text-2xl">{title}</h3>
				<div set:html={description && (await renderMarkdown(description))} />
			</div>
			<slot />
		</div>
	</div>
</Tag>
