---
import { Image } from 'astro:assets';
import { renderMarkdown } from '@utils/renderMarkdown';
import type { ImageMetadata } from 'astro';


export interface Props {
  image?: ImageMetadata;
  imageAlt?: string;
  title?: string;
  description?: string;
  href?: string;
  variant?: 'primary' | 'secondary' | 'supporting1' | 'supporting2' | 'speed' | 'neutral';
  houseVariant?: 'standard' | 'short' | 'wide';
  class?: string;
}

const {
  image,
  imageAlt = '',
  title,
  description,
  href,
  variant = 'primary',
  houseVariant = 'standard',
  class: className = ''
} = Astro.props;

const variantColors = {
  primary: 'bg-primary-50 hover:bg-primary-100',
  secondary: 'bg-secondary-50 hover:bg-secondary-100',
  supporting1: 'bg-supporting1-50 hover:bg-supporting1-100',
  supporting2: 'bg-supporting2-50 hover:bg-supporting2-100',
  speed: 'bg-speed-50 hover:bg-speed-100',
  neutral: 'bg-neutral-50 hover:bg-neutral-100',
};

const houseVariantStyles = {
  standard: '',
  short: '',
}

const Tag = href ? 'a' : 'div';
---

<Tag
	href={href}
	class={`block transition-all border-neutral-200 text-neutral-600 border-b-4 no-underline duration-200 ${className}`}
>
	<div id="houseCard" class="flex h-full flex-col gap-6 bg-white p-4">
		{
			image && (
				<div class="-m-4 mb-0 max-h-52 overflow-hidden">
					<Image
						src={image}
						alt={imageAlt}
						class="object-cover object-center"
					/>
				</div>
			)
		}

		{
			title && (
				<h3 class="text-xl font-bold text-neutral-900 md:text-2xl">{title}</h3>
			)
		}

		<div
			class="grow justify-self-start"
			set:html={description && (await renderMarkdown(description))}
		/>
		<slot />
	</div>
</Tag>

<style>
	#houseCard {
		mask: conic-gradient(from 45deg at 50px 50px, #000 75%, #0000 0) -50px;
	}
</style>
