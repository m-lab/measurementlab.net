---
import { getCollection } from 'astro:content';
import Heading from '@components/atoms/Heading.astro';
import type { Person as PersonType } from '@components/organisms/Person.astro';
import Person from '@components/organisms/Person.astro';
import SectionLayout from '@layouts/SectionLayout.astro';

export interface Props {
  category?: string;
  sectionLabel?: string;
}

const { category } = Astro.props;
// Query all people from the collection
const peopleEntries = await getCollection('people');
const allPeople: PersonType[] = peopleEntries.map((entry) => entry.data);

// If category specified, filter by that category; otherwise show all
const peopleGrid = category
  ? allPeople.filter((person) => person.sections.includes(category))
  : allPeople;

// Determine the section title
const sectionTitle = category || 'Our Team';


---

<div>
	<!-- Section Headline -->
	<div class="mb-12 text-center">
		<Heading level={2} class="mb-4">
			{sectionTitle}
		</Heading>
	</div>

	<!-- People Grid -->
	<div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
		{peopleGrid.map((person) => <Person person={person} />)}
	</div>

	<!-- Empty State -->
	{
		peopleGrid.length === 0 && (
			<div class="py-12 text-center text-gray-500">
				No people found in this section.
			</div>
		)
	}
</div>
